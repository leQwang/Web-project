<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    
    <link rel="stylesheet" href="../css/productDetail.css">
    <link rel="stylesheet" href="../css/style.css">
	<link rel="stylesheet" href="../css/header.css">
    <link rel="stylesheet" href="../css/footer.css">



    <title>Product detail</title>
</head>
<body>

	<%- include ('partials/header') %>

  
<main>
    <div class="container">
		<div class="product">
			<div class="image">
				<img src="<%= product.image %>" alt="Product Image <%= product.image%>">
			</div>
			<div class="details">
				<h1><%= product.name%></h1>
				<h2>$<%= product.price%></h2>
				<p><%= product.description%></p>
				<% if(role === 'Customer'){ %>
				<button class="add-to-cart" >Add to Cart</button>
				<div class="add-to-cart-confirm" style="display: none;">Successfully added to cart</div>
				<% }; %>
			</div>
		</div>
	</div>
</main>
<%- include ('partials/footer') %>
<script>
	const addToCart = document.querySelector('.add-to-cart');
	addToCart.addEventListener('click', ()=>{
		document.querySelector('.add-to-cart-confirm').style = "display:flex";
		var added = false;
		for (let i = 0; i < localStorage.length; i++) {
            var key = localStorage.key(i);
            console.log(localStorage.getItem(key));
            var addedProduct = JSON.parse(localStorage.getItem(key));
			if(addedProduct._id === '<%= product._id %>'){
				added = true;
				break;
			}
		}
		if(!added){
			var num = localStorage.length;
			localStorage.setItem(++num, '<%-JSON.stringify(product)%>');
		}
	})
</script>
</body>

</html>